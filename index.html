<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gratitude Buddy</title>

  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f6f7fb;
      color: #333;
      display: flex;
      justify-content: center;
      padding: 20px;
    }

    .card {
      max-width: 480px;
      width: 100%;
      background: white;
      border-radius: 18px;
      padding: 28px 22px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    }

    h1 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 6px;
      color: #444;
    }

    .subtitle {
      font-size: 14px;
      color: #777;
      margin-bottom: 22px;
      line-height: 1.5;
    }

    textarea {
      width: 100%;
      min-height: 90px;
      border-radius: 12px;
      border: 1px solid #ddd;
      padding: 12px;
      font-size: 14px;
      resize: none;
      outline: none;
      transition: border 0.2s;
    }

    textarea:focus {
      border-color: #a8b5ff;
    }

    button {
      margin-top: 12px;
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 12px;
      background: #7c8cff;
      color: white;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    button:hover {
      background: #6677ff;
    }

    .message {
      margin-top: 18px;
      font-size: 14px;
      color: #666;
      text-align: center;
      min-height: 20px;
    }

    .history {
      margin-top: 28px;
    }

    .entry {
      background: #f3f4f8;
      padding: 12px 14px;
      border-radius: 12px;
      font-size: 14px;
      margin-bottom: 10px;
      line-height: 1.4;
    }

    .date {
      font-size: 11px;
      color: #999;
      margin-top: 4px;
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>You made it through today.</h1>
    <div class="subtitle">
      I’m really glad you’re here.<br /><br />
      What is one small thing that felt even a little okay today?
    </div>

    <textarea id="reflection" placeholder="You can write honestly here… nothing has to be perfect."></textarea>
    <button onclick="saveReflection()">Save</button>

    <div class="message" id="message"></div>

    <div class="history" id="history"></div>
  </div>

  <script>
    const supportiveMessages = [
      "Thank you for staying.",
      "Small steps still count.",
      "You don’t have to carry everything alone.",
      "Today was heavy, and you still showed up.",
      "Breathing and being here is enough for now."
    ];

    function getReflections() {
      return JSON.parse(localStorage.getItem("gratitude_reflections") || "[]");
    }

    function saveReflections(data) {
      localStorage.setItem("gratitude_reflections", JSON.stringify(data));
    }

    function saveReflection() {
      const text = document.getElementById("reflection").value.trim();
      if (!text) return;

      const reflections = getReflections();

      reflections.unshift({
        text,
        date: new Date().toLocaleDateString(undefined, {
          year: "numeric",
          month: "short",
          day: "numeric"
        })
      });

      saveReflections(reflections);
      document.getElementById("reflection").value = "";

      const randomMessage =
        supportiveMessages[Math.floor(Math.random() * supportiveMessages.length)];
      document.getElementById("message").textContent = randomMessage;

      renderHistory();
    }

    function renderHistory() {
      const reflections = getReflections();
      const container = document.getElementById("history");

      container.innerHTML = "";

      reflections.forEach(r => {
        const div = document.createElement("div");
        div.className = "entry";
        div.innerHTML = `
          ${r.text}
          <div class="date">${r.date}</div>
        `;
        container.appendChild(div);
      });
    }

    renderHistory();
  </script>
</body>
</html>
